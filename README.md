# solr-scpa-scores

## Introduction

Note: Previous versions of this repository were used as a Solr configuration
directory on solr.lib.umd.edu. This repository has now been changed to support
creating a Docker image containing the data.

When making updates to the data or configuration, a new Docker image should be
created.

---
## Work in Progress

**Note**: This version of the repository is a work-in-progress.

This version will process the provided "data.csv" file through both the
"scripts/cleanup.sh" script and the "update-script.js". These scripts
were generated for use against a CSV file generated by SCPA.

Unfortunately, the original CSV file used to populate the SCPA Scores Solr
instance has been lost, and the procedure to generate the CSV file is not
entirely clear. Therefore, this version will likely _not_ work against a
SCPA-provided CSV file without changes.

This version _cannot_ be used to load a CSV export from Solr, as a CSV export
from Solr does not include the proper "multi-value" indicators expected by
the "update-script.js" script. This leads to the facet information becoming
incorrect.

The "data.csv" file provided is the "scores_20140922revised.csv" from
[Confluence](https://confluence.umd.edu/display/LIB/SolrDB+Project%3A+SCPA+Scores+Collection).

The "data.csv" file should not be used AS-IS. It is only being provided
as a representation of the format expected by the scripts.
---

## Building the Docker Image

When building the Docker image, the "data.csv" file will be used to populate
the Solr database.

To build the Docker image named "solr-scpa-scores":

```
> docker build -t solr-scpa-scores .
```

To run the freshly built Docker container on port 8983:

```
> docker run -it --rm -p 8983:8983 solr-scpa-scores
```

## License

See the [LICENSE](LICENSE.txt) file for license rights and limitations.
